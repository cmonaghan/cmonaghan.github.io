<!DOCTYPE HTML>
<html lang="en" prefix="og: http://ogp.me/ns#">
  <head>
    <meta charset="utf-8">
    <title>Readify Numbers &mdash; Christian Monaghan</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link href='http://fonts.googleapis.com/css?family=Poly:400,400italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" media="screen, projection" href="/res/screen.css" type="text/css">
    <link rel="stylesheet" media="print" href="/res/print.css" type="text/css">
    <link rel="alternate" type="application/atom+xml" title="Christian Monaghan" href="http://feeds.feedburner.com/hunch">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon-precomposed" href="/res/apple-touch-icon-57x57-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/res/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/res/apple-touch-icon-114x114-precomposed.png">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@rsms">
    
    <meta property="fb:admins" content="728642302">
    <meta property="fb:app_id" content="38027689216">
    
    <meta property="og:title" content="Readify Numbers">
      
      <meta name="description" content="I was recently working on a project that required me to display large numbers to the user (in the hundreds of thousands or millions). No one wants to read a long string of zeros, trying to figure out if the number is 100000000 or 10000000. I figured someone must have already written a simple script to perform this exact operation but after a bit of searching, I came up empty. So I decided to write my own script and here I am sharing it with you.">
      <meta name="og:description" content="I was recently working on a project that required me to display large numbers to the user (in the hundreds of thousands or millions). No one wants to read a long string of zeros, trying to figure out if the number is 100000000 or 10000000. I figured someone must have already written a simple script to perform this exact operation but after a bit of searching, I came up empty. So I decided to write my own script and here I am sharing it with you.">
      
    
    
    
    
    <meta property="og:url" content="http://rsms.me/2014/01/15/readified-numbers.html">
    <meta property="og:site_name" content="rsms.me">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en_GB" />
    
    <meta property="article:published_time" content="2014-01-15">
    
    
    <script>
  //html { zoom:50%; }
  if (window.addEventListener) {
    var sidebarAdjustTimer;
    function updateOrientation(orientationChangeEvent) {
      if (sidebarAdjustTimer) clearInterval(sidebarAdjustTimer);
      //console.log('window.orientation -> '+window.orientation);
      if (window.orientation === -90 || window.orientation === 90) {
        // landscape
        var sidebar = document.getElementById('sidebar');
        if (!sidebar.src || sidebar.src === '') {
          sidebar.src = '/archive/sidebar.html';
        }
        sidebarAdjustTimer = setInterval(function() {
          var height = Math.round(document.height * 1.6);
          if (sidebar.height != height) {
            sidebar.height = height;
            sidebar.style.height = height + 'px';
          }
        },500);
      } else {
        // portrait
      }
    }
    window.addEventListener('orientationchange', updateOrientation);
    document.addEventListener('DOMSubtreeModified', function(ev) {
      if (document.getElementById('sidebar')) {
        document.removeEventListener('DOMSubtreeModified', arguments.callee);
        updateOrientation();
      }
    });
  }
</script>
    
    
  </head>
  <body>
    <!--script>/*
      var s;
      if (document.location.hostname === 'rsms.me') {
        s = document.createElement('script');
        s.async = true;
        s.src = "http://connect.facebook.net/en_US/all.js#appId=38027689216&xfbml=1";
        document.getElementsByTagName('head')[0].appendChild(s);
      }

      if (window.navigator.userAgent.indexOf('iPad') != -1) {
        document.documentElement.className = 'ios ipad';
        window.rsmsHostIsIOS = 'ipad';
      } else if (window.navigator.userAgent.indexOf('iPhone') != -1) {
        document.documentElement.className = 'ios iphone';
        window.rsmsHostIsIOS = 'iphone';
      }
    */</script>
    <div id="fb-root"></div><script></script-->
    <iframe id="sidebar"></iframe>
    <header>
      <h1 class="logo" style="text-decoration:none" onclick="document.location.href='/';"><a href="/">
        <!-- <img src="/res/christian-monaghan-logo.png" width="320" height="50" alt="Signature"> -->
        Christian Monaghan
      </a></h1>
      <ul class="navigation">
        <li><a href="/photos/" title="A selection of recent photography">Photography</a></li>
        <li><a href="/projects/" title="Projects I am or was involved in">Projects</a></li>
        <li><a href="/archive/" title="Archived articles">Archive</a></li>
        <li><a href="/about/">About me</a></li>
      </ul>
    </header>
    <!--div class="wrapper content"-->
      <div class="content">
  <div class="post single">
    
    <h1>Readify Numbers</h1>
    <info datetime="2014-01-15">
      Jan 15, 2014
    </info>
    
    <div class="body"><p><img src="http://pulse.ncpolicywatch.org/wp-content/uploads/2009/02/numbers.gif" width="50%" align="right"></p>

<p>I was recently working on a project that required me to display large numbers to the user (in the hundreds of thousands or millions). No one wants to read a long string of zeros, trying to figure out if the number is 100000000 or 10000000. I figured someone must have already written a simple script to perform this exact operation but after a bit of searching, I came up empty. So I decided to write my own script and here I am sharing it with you. (The full code can be found as <a href="https://gist.github.com/cmonaghan/8499612">a gist</a> on Github).</p>

<p>The goal is to convert numbers like so:</p>

<pre><code>200000 --&gt; "200k"
1200000 --&gt; "1.2M"
54100000000 --&gt; "54.1B"
</code></pre>

<p>The first step is to determine how many digits the number has. To do this, we convert the number to a string. Before doing this however, we will want to round the input to an integer first because we don&rsquo;t want a number like 150.064 to throw us off with 6 digits.</p>

<pre><code>// convert input number to string and remove anything after the decimal
var numberString = Math.floor(number).toString();

// find digits length
var digitsLength = numberString.length;
</code></pre>

<p>Next we want to trim our number down based on how many digits it contains. A number that has 6 digits is in the thousands, and therefore we would want to trim off the last 3 digits and add a &lsquo;k&rsquo; for thousands. A number that has 7 digits is in the millions, and therefore we would want to trim off the last 6 digits and add an &rsquo;M' for millions. I&rsquo;ve performed this task with a simple if/else statement. A switch statement could also work well here, but I prefer the if/else simply because there&rsquo;s less of a chance for error. When using switch statements, you can easily miss a &lsquo;break&rsquo; or a &lsquo;default&rsquo;, causing your code not to work as you expect.</p>

<p>Below I&rsquo;m using a helper function called trimToTenths, which as you might expect, trims the number to the tenths place. We&rsquo;ll look at this helper function in a second, but for now just know that this trimToTenths function allows us to keep the tenths place in our numbers. (I think &lsquo;1.4M&rsquo; looks much better than &lsquo;1M&rsquo;).</p>

<pre><code>// check length (to determine whether to convert to thousands or millions)
if (digitsLength &lt;= 3 &amp;&amp; digitsLength !== 0) {
  return trimToTenths( number.toString() );
} else if (digitsLength &lt;= 6) {
  number = number/1000;
  return trimToTenths( number.toString() ) + 'k';
} else if (digitsLength &lt;= 9) {
  number = number/1000000;
  return trimToTenths( number.toString() ) + 'M';
} else if (digitsLength &lt;= 12) {
  number = number/1000000000;
  return trimToTenths( number.toString() ) + 'B';
} else {
  console.log('Only numbers with a string length between 1-12 digits before the decimal will be converted to a readable number.');
  return number.toString();
}
</code></pre>

<p>As you may have noticed the above code has an else block at the end that will run if no other conditions are met. This block will only run for numbers exceeding 12 digits. (I&rsquo;ve never really seen numbers displayed as &lsquo;1.2T&rsquo; for trillions or &lsquo;1.2Q&rsquo; for quadrillions. If your numbers are that big, then you need a different convention for displaying them.) I use a console.log instead of throwing an error because I don&rsquo;t want to interrupt the normal execution of the code, but I do want to display to the future user of this code that the number was not converted.</p>

<p>Below I&rsquo;ve detailed how the helper function operates for trimming a number to the tenths place. It&rsquo;s fairly self-explanatory. The one notable point of interest is the line where roundedNum is defined. Rather than implement a lengthy function that would round numbers to the tenths place using some extension of Math.round(), I instead simply multiply the number by 10, round it to an integer, and then divide it by 10 again. This allows me to essentially round a number to the tenths place in one line of code rather than writing a whole new function.</p>

<pre><code>// helper functions
function trimToTenths(stringifiedNumber) {
  var index = stringifiedNumber.indexOf('.');
  if (index === -1) {
    return stringifiedNumber;
  } else {
    var slicedNum = stringifiedNumber.slice(0, index + 3); // slices an extra digit so that it can be rounded
    var roundedNum = Math.round(Number(slicedNum) * 10) / 10; // multiply, then divide by 10 as a quick hack to round to the tenths place
    return roundedNum.toString();
  }
}
</code></pre>

<p>And don&rsquo;t forget to do some error handling at the beginning of the function to avoid any odd behavior you minght encounter. For this I simply check to make sure the number passed to the function is either a number or can be cast to a number. If if fails this test, I throw an actual error because something unexpected occurred and needs to be remedied.</p>

<pre><code>// throw error for any parameter input that is not a number and cannot be converted into a number
if (Number(number).toString() === 'NaN') {
  throw 'Error. The readifyNumbers input parameter must be a number.';
}
</code></pre>

<p>My hope is that this snippet of code can help you solve a simple issue without having to duplicate work by writing a similar script from scratch. If you have any recommended optimizations, please write a comment!</p>
</div>
    <!-- <div class="breaker"></div> -->
    <div class="breaker"></div>
    <!-- <info class="after">
<div class="fb-like" data-href="http://rsms.me/2014/01/15/readified-numbers.html" data-send="false" data-width="550" data-show-faces="false" data-font="arial"></div>
    </info> -->

  
  </div>
</div>

<!-- During authoring, this automatically reloads the post as its changing -->
<script type="text/javascript">
(function() {
var qs = document.location.search;
var current_etag = qs.match(/etag=("?[a-zA-Z0-9_-]+)/);
if (current_etag !== null) { current_etag = current_etag[1]; }
var scrolly = qs.match(/scrolly=([0-9]+)/);
if (scrolly) {
  scrolly = parseInt(scrolly[1]);
  window.scrollTo(window.scrollX, scrolly);
  setTimeout(function () {
    window.scrollTo(window.scrollX, scrolly);
  }, 10);
}

function check() {
  var r = new XMLHttpRequest();
  var url = document.location.href + ((qs && qs !== '') ? '&' : '?') + 'r=' + Math.random();
  r.open('GET', url, true);
  r.onreadystatechange = function() {
    if (r.readyState == 4){
      var found_etag = r.getResponseHeader('Etag').replace(/^"|"$/g);
      //console.log('current_etag:', current_etag, 'found_etag:', found_etag);
      if (current_etag === null) {
        current_etag = found_etag;
      } else if (found_etag !== current_etag) {
        document.location.search =
          '?etag=' + encodeURIComponent(found_etag) +
          '&scrolly=' + window.scrollY;
        return;
      }
      setTimeout(check, 500);
    }
  };
  r.send(null);
}
check();
})();
</script>


    <!--/div-->

    
    <!--div class="content sub">
      <h2 id="comments">Comments</h2>
      <div class="fb-comments" data-href="http://rsms.me/2014/01/15/readified-numbers.html" data-num-posts="" data-width="550" data-font="arial"></div>
    </div-->
    

    

    
    <footer>
      <p>
        <a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.en_US" class="cc"><img src="/res/cc-cc.png" class="cc">
        <img src="/res/cc-by.png" class="cc"></a>
        This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.en_US">Creative Commons License</a>
      </p>
    </footer>
    

    <script>
  // curry pre < code to be able to get prettified
  // If the first line is
  //   #!-langname\n
  // Then that line is removed from the code and "langname" is given to prettify.
  // If "langname" is "none", that prettify is not applied at all.
  var n,i,L,cn,lang,v = document.getElementsByTagName('pre');
  var m,lang_re = /^#\!-([a-zA-Z0-9_-]+)\n/;
  for (i=0,L=v.length;i<L;++i) {
    n = v.item(i);
    if ((cn = n.firstChild) && cn.nodeName == 'CODE') {
      lang = null;
      if (cn.firstChild.nodeType === Node.TEXT_NODE) {
        m = lang_re.exec(cn.firstChild.nodeValue);
        if (m) {
          lang = m[1].toLowerCase();
          cn.firstChild.nodeValue = cn.firstChild.nodeValue.substr(m[0].length);
          if (lang === 'none') {
            continue;
          }
        }
      }
      n.setAttribute('class', 'prettyprint'+(lang ? ' lang-' + lang : ''));
    }
  }
</script>
<script async src="/res/prettify.js"></script>

    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9078556-2']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  </body>
</html>
